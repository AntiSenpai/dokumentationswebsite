{# templates/customer/index.html.twig #}
{% extends 'base.html.twig' %}

{% block body %}
<!DOCTYPE html>
<html lang="de">
<link rel="stylesheet" href="{{ asset('css/customer.css') }}">
  <div class="search-add-box">
  <div class="search-box">
  <form action="{{ path('customer_index') }}" method="get">
    <input type="text" name="search" placeholder="Kunden suchen...">
    <button class="search-btn" type="submit">üîç</button>
  </form>
  </div>
  <button type="button" class="btn btn-primary" id="btn btn-primary" data-toggle="modal" data-target="#createCustomerModal">Neuer Eintrag</button>
{{ include('customer/create.html.twig', {'form': createForm}) }}
</div>

<h2>Kundenverzeichnis</h2>

<div class="customer-list">
<div class="customer-list-header">
  <span>ID</span>
  <span>Name</span>
  <span>Standort</span>
  <span>Erstellt am</span>
</div>
  {% for customer in customers %}
  <div class="customer-entry {% if loop.index is odd %}customer-odd{% endif %}">
    <div>{{ customer.id }}</div>
    <div>{{ customer.name }}</div>
    <div>{{ customer.location }}</div>
    <div>{{ customer.createdAt|date('d.m.Y') }}</div>
  </div>
  {% endfor %}
</div>

<script>
   document.getElementById('customerSearch').addEventListener('input', function(e) {
            var searchValue = e.target.value.toLowerCase();
            document.querySelectorAll('.customer-entry').forEach(function(customer) {
                var name = customer.querySelector('.customer-name').textContent.toLowerCase();
                customer.style.display = name.includes(searchValue) ? 'block' : 'none';
            });
        });

        function showDetails(customerId) {
            // Logik f√ºr die Anzeige von Details und Unterstandorten des Kunden
            console.log('Kundendetails f√ºr: ' + customerId);
        }
</script>
<script>
  document.getElementById('btn btn-primary').addEventListener('click', function() {
    openAddCustomerModal();
  });

  function openAddCustomerModal() {
    $('#createCustomerModal').modal('form');
  }
</script>
</html>
{% endblock %}
